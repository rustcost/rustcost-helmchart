# ------------------------------------------------
# Project: Rustcost
# Backend: rustcost-core (Axum)
# Dashboard: rustcost-dashboard (React)
# ------------------------------------------------

# Number of backend replicas
replicaCount: 1

# -----------------------------
# Logging
# -----------------------------
logging:
  level: warn
  moduleLevels: {}

# -----------------------------
# Backend (rustcost-core)
# -----------------------------
image:
  repository: kimc1992/rustcost-core
  tag: "1.0.0-dev.12"
  pullPolicy: Always

service:
  type: ClusterIP
  port: 80
  targetPort: 3000

resources: {}
# Example:
# resources:
#   requests:
#     cpu: "100m"
#     memory: "128Mi"
#   limits:
#     cpu: "500m"
#     memory: "512Mi"

# -----------------------------
# Persistence (for local data dir)
# -----------------------------
persistence:
  enabled: true
  size: 5Gi
  storageClass: "" # leave empty to use cluster default
  mountPath: /app/data

# -----------------------------
# Dashboard (rustcost-dashboard)
# -----------------------------
dashboard:
  enabled: true
  image:
    repository: kimc1992/rustcost-dashboard
    tag: "0.0.1-prototype"
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 80
    targetPort: 8080
  env:
    VITE_BACKEND_URL: "http://rustcost-core-svc:80"

# -----------------------------
# Node Exporter (optional)
# -----------------------------
nodeExporter:
  enabled: false
  image: quay.io/prometheus/node-exporter:v1.8.1
  port: 9100

# -----------------------------
# cAdvisor (optional external collector)
# -----------------------------
cadvisor:
  enabled: false
  serviceName: "" # override if you already run a shared cadvisor service
  port: 4194

# -----------------------------
# Ingress (optional)
# -----------------------------
ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: rustcost.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

# -----------------------------
# RBAC / Service Account
# -----------------------------
rbac:
  create: true
  serviceAccount:
    create: true
    name: ""

fullnameOverride: rustcost
